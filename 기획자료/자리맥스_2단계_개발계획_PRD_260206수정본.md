# 자리맥스 플랫폼 개발 계획서 (v2.1 - 수정본)

**AI 매칭 엔진 + MBTI 기반 성공 예측 시스템**

*Success = f(Location, Item, Human)*

---

## 📋 수정 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| v2.0 | 2026-02-04 | 초기 2단계 개발 계획 수립 |
| v2.1 | 2026-02-06 | **1단계 MVP에 카카오맵 지도 기능 추가** |

---

## 🛠 기술 스택

### Frontend
- **Framework**: Flutter 3.x (Web + iOS + Android 단일 코드베이스)
- **상태관리**: Riverpod 2.x
- **지도**: Kakao Map (flutter_kakao_maps 또는 kakao_map_plugin)
- **차트**: fl_chart

### Backend
- **Framework**: Python FastAPI
- **Database**: PostgreSQL + Supabase
- **AI Engine**: OpenAI GPT-4 / Claude API
- **Cache**: Redis

### External APIs
- 소상공인진흥공단 상권정보 API
- 국민건강보험공단 API (건강정보)
- **카카오맵 API** (지도, 장소검색)
- 토스페이먼츠 (결제) - 2단계

---

## 🚀 1단계 MVP (16주) - 수정됨

> **목표**: "AI가 10초 만에 성공 확률을 분석해준다" 핵심 가치 검증
> 
> **변경사항**: 카카오맵 지도 기능 추가로 기존 14주 → 16주 확장

### 1.1 포함 기능 (29개)

#### 👤 회원 관리 (4개)
| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 1 | 회원가입 | 이메일/비밀번호 기반 | P0 |
| 2 | 로그인/로그아웃 | JWT 토큰 인증 | P0 |
| 3 | 프로필 관리 | 기본 정보, 사진 | P1 |
| 4 | 액터 유형 선택 | 건물주/상가점주/제조사 | P0 |

#### 🏢 건물/공실 관리 (5개)
| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 5 | 건물 정보 등록 | 주소, 면적, 층수, 임대조건 | P0 |
| 6 | 공실 등록/수정 | 상태, 사진, 상세정보 | P0 |
| 7 | 공실 목록 조회 | 리스트 형태 | P0 |
| 8 | 공실 상세 보기 | 상세 정보 페이지 | P0 |
| 9 | 공실 상태 변경 | 공실/임대중 토글 | P1 |

#### 📦 상품(아이템) 관리 (4개)
| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 10 | 상품 등록 | 카테고리, 가격, 설명 | P0 |
| 11 | 상품 목록 조회 | 카테고리별 필터 | P0 |
| 12 | 상품 상세 보기 | 상세 정보 페이지 | P0 |
| 13 | 상품 수정/삭제 | 등록 정보 관리 | P1 |

#### 🧠 MBTI 분석 (3개)
| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 14 | MBTI 간편 테스트 | 10문항 간소화 버전 | P0 |
| 15 | MBTI 결과 저장 | 프로필에 연동 | P0 |
| 16 | MBTI 기반 추천 | E/I, J/P 성향 매칭 | P1 |

#### 🤖 AI 성공 예측 엔진 (5개) - **핵심 MVP**
| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 17 | 성공 확률 분석 | Success = f(L, I, H) 계산 | P0 |
| 18 | AI 리포트 생성 | 10초 내 분석 결과 | P0 |
| 19 | 상권 데이터 연동 | 소상공인진흥공단 API | P0 |
| 20 | 궁합 점수(Fit Score) | 위치-상품-사람 매칭도 | P0 |
| 21 | 추천 피드백 | AI 추천 이유 설명 | P1 |

#### 🗺️ 지도 기능 (5개) - **신규 추가**
| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 22 | 지도 기본 표시 | 카카오맵 연동, 현재 위치 | P0 |
| 23 | 공실 위치 핀 표시 | 마커로 공실 위치 표시 | P0 |
| 24 | 지도 기반 검색 | 지역 선택 후 공실 검색 | P0 |
| 25 | 핀 클러스터링 | 다수 마커 그룹화 | P1 |
| 26 | 반경 검색 | 특정 지점 기준 반경 내 검색 | P1 |

#### 🔍 검색/대시보드 (3개)
| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 27 | 공실 검색 | 지역/면적/가격 필터 | P0 |
| 28 | 상품 검색 | 카테고리/가격 필터 | P0 |
| 29 | 기본 대시보드 | 내 등록 현황 요약 | P1 |

### 1.2 개발 일정 (16주)

```
[Sprint 1-2] 주 1-4: 기반 구축
├── Flutter 프로젝트 셋업 + 아키텍처
├── FastAPI 백엔드 기본 구조
├── PostgreSQL 스키마 설계
├── 회원 인증 시스템 (4개 기능)
└── 카카오맵 SDK 연동 기반 작업

[Sprint 3-4] 주 5-8: 핵심 데이터 모델
├── 건물/공실 CRUD (5개 기능)
├── 상품 CRUD (4개 기능)
├── 기본 검색 기능
└── 지도 기본 표시 + 공실 핀 마커

[Sprint 5-6] 주 9-12: AI 엔진 + 지도 고급
├── MBTI 테스트 및 저장 (3개 기능)
├── 상권정보 API 연동
├── AI 성공 예측 엔진 (5개 기능)
├── 지도 기반 검색 + 클러스터링
└── 반경 검색 기능

[Sprint 7-8] 주 13-16: 통합 및 런칭
├── 대시보드 구현
├── UI/UX 개선
├── 테스트 및 버그 수정
├── Flutter Web 배포 (Vercel/Firebase)
└── 베타 테스트 진행
```

### 1.3 카카오맵 구현 상세

#### 기술 선택
```yaml
Primary: flutter_kakao_maps (gunyu1019)
  - 네이티브 기반 (WebView 아닌 실제 SDK)
  - Android / iOS / Web 모두 지원
  - 성능 우수

Fallback: kakao_map_plugin
  - WebView 기반
  - 안정성 검증됨
  - 기능 제한적 (카메라 회전 등 미지원)
```

#### 주요 구현 내용
```dart
// 1. 지도 서비스 추상화 (향후 전환 용이)
abstract class MapService {
  Future<void> initialize();
  Future<void> showMarker(LatLng position, String title);
  Future<void> showMarkers(List<MarkerData> markers);
  Future<void> enableClustering();
  Future<List<Place>> searchInRadius(LatLng center, double radiusKm);
}

// 2. 카카오맵 구현체
class KakaoMapServiceImpl implements MapService {
  // flutter_kakao_maps 또는 kakao_map_plugin 사용
}

// 3. 향후 네이버맵 전환 시
class NaverMapServiceImpl implements MapService {
  // flutter_naver_map 사용
}
```

#### 비용 예측
| 구분 | 일 사용량 | 월 사용량 | 비용 |
|------|-----------|-----------|------|
| MVP 베타 (MAU 100) | ~1,000건 | ~30,000건 | **무료** |
| 초기 운영 (MAU 1,000) | ~10,000건 | ~300,000건 | **무료** |
| 성장기 (MAU 10,000) | ~100,000건 | ~3,000,000건 | **무료** (일 30만건 이내) |
| 스케일업 (MAU 30,000+) | ~300,000건 | ~9,000,000건 | 유료 전환 검토 |

### 1.4 제외 기능 (2단계로 이관)

- ❌ 3가지 시뮬레이션 모드 (건물주/상가점주/제조사 각각)
- ❌ 계약 관리 시스템
- ❌ 결제/정산 시스템
- ❌ 알림 시스템 (푸시/이메일/SMS)
- ❌ 매출 관리
- ❌ 상권 분석 오버레이 (지도 위 상권 데이터 시각화)
- ❌ 동종업체 검색 (카카오 Local API)
- ❌ AI 예측 정확도 추적

---

## 🎯 2단계 Full Feature (18주) - 조정됨

> **목표**: 전체 기능 구현 + iOS/Android 앱 스토어 출시
>
> **변경사항**: 지도 기본 기능이 1단계로 이동하여 기존 20주 → 18주 단축

### 2.1 추가 기능 (38개)

#### 🎮 시뮬레이션 모드 (6개)
| # | 기능 | 설명 |
|---|------|------|
| 30 | 건물주 시뮬레이션 | Location 고정, Item+Human 변수 |
| 31 | 상가점주 시뮬레이션 | Item+Human 고정, Location 변수 |
| 32 | 제조사 시뮬레이션 | Item 고정, Location+Human 변수 |
| 33 | 시뮬레이션 결과 비교 | 여러 조합 비교 분석 |
| 34 | 시뮬레이션 저장 | 결과 저장 및 공유 |
| 35 | 시뮬레이션 히스토리 | 과거 결과 조회 |

#### 📝 계약 관리 (5개)
| # | 기능 | 설명 |
|---|------|------|
| 36 | 입점 신청 | 상가점주 → 건물주 신청 |
| 37 | 신청 승인/거절 | 건물주 심사 |
| 38 | 계약서 생성 | 전자 계약서 작성 |
| 39 | 계약 상태 관리 | 진행중/완료/만료 |
| 40 | 계약 이력 | 전체 계약 내역 조회 |

#### 💳 결제/정산 (6개)
| # | 기능 | 설명 |
|---|------|------|
| 41 | 토스페이먼츠 연동 | 결제 게이트웨이 |
| 42 | 구독 결제 | 월간/연간 플랜 |
| 43 | 수수료 정산 | 자동 정산 시스템 |
| 44 | 정산 내역 조회 | 정산 리포트 |
| 45 | 세금계산서 발행 | 자동 발행 연동 |
| 46 | 환불 처리 | 환불 요청 관리 |

#### 🔔 알림 (4개)
| # | 기능 | 설명 |
|---|------|------|
| 47 | 푸시 알림 | FCM 연동 |
| 48 | 이메일 알림 | 주요 이벤트 메일 |
| 49 | SMS 알림 | 긴급 알림 |
| 50 | 알림 설정 | 알림 유형별 on/off |

#### 📊 고급 분석 (5개)
| # | 기능 | 설명 |
|---|------|------|
| 51 | 매출 대시보드 | 상가점주 매출 추적 |
| 52 | 임대 수익 분석 | 건물주 수익 분석 |
| 53 | AI 예측 정확도 | 실제 vs 예측 비교 |
| 54 | 트렌드 분석 | 상권/업종 트렌드 |
| 55 | 리포트 다운로드 | PDF 리포트 생성 |

#### 🗺️ 지도 고급 기능 (4개)
| # | 기능 | 설명 |
|---|------|------|
| 56 | 상권 분석 오버레이 | 지도 위 상권 데이터 시각화 |
| 57 | 동종업체 검색 | 카카오 Local API 연동 |
| 58 | 유동인구 히트맵 | 시간대별 유동인구 표시 |
| 59 | 경쟁점 분석 | 반경 내 경쟁점 표시 |

#### 👥 커뮤니티/기타 (8개)
| # | 기능 | 설명 |
|---|------|------|
| 60 | 리뷰 시스템 | 거래 후 리뷰 작성 |
| 61 | 신고 기능 | 부적절 콘텐츠 신고 |
| 62 | FAQ/도움말 | 인앱 도움말 |
| 63 | 1:1 문의 | 고객센터 연동 |
| 64 | 공지사항 | 운영 공지 |
| 65 | 이용약관 | 약관 동의 관리 |
| 66 | 회원 탈퇴 | 계정 삭제 |
| 67 | 데이터 백업 | 사용자 데이터 내보내기 |

### 2.2 개발 일정 (18주)

```
[Sprint 9-10] 주 17-20: 시뮬레이션 모드
├── 3가지 시뮬레이션 모드 구현 (6개 기능)
└── 시뮬레이션 결과 비교 및 저장

[Sprint 11-12] 주 21-24: 계약 + 결제
├── 계약 관리 시스템 (5개 기능)
├── 토스페이먼츠 결제 연동
└── 정산 시스템 기초

[Sprint 13-14] 주 25-28: 알림 + 고급분석
├── 푸시/이메일/SMS 알림 (4개 기능)
├── 매출/수익 분석 대시보드
└── AI 예측 정확도 추적

[Sprint 15-16] 주 29-32: 지도 고급 + 커뮤니티
├── 상권 분석 오버레이
├── 동종업체/경쟁점 분석
├── 리뷰/신고/FAQ 시스템
└── 기타 편의 기능

[Sprint 17-18] 주 33-34: 앱 출시
├── iOS/Android 앱 빌드 최적화
├── 앱 스토어 심사 제출
├── 최종 QA 및 버그 수정
└── 정식 런칭
```

---

## 📊 전체 일정 요약

| 단계 | 기간 | 기능 수 | 주요 산출물 |
|------|------|---------|-------------|
| **1단계 MVP** | 16주 | 29개 | Flutter Web 베타 버전 |
| **2단계 Full** | 18주 | +38개 (총 67개) | iOS/Android 앱 출시 |
| **총합** | **34주** | **67개** | 전체 플랫폼 완성 |

---

## 🎯 1단계 MVP 성공 지표 (KPI)

| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
| AI 분석 응답 시간 | < 10초 | 서버 로그 |
| 분석 완료율 | > 90% | 에러 로그 |
| 지도 로딩 시간 | < 2초 | 프론트엔드 측정 |
| 베타 사용자 | 100명 | 가입자 수 |
| 재방문율 | > 30% | GA4 |

---

## ⚠️ 리스크 및 대응

### 기술 리스크

| 리스크 | 영향 | 대응 방안 |
|--------|------|-----------|
| flutter_kakao_maps 패키지 불안정 | 중 | kakao_map_plugin(WebView) 대안 준비 |
| 카카오맵 정책 변경 | 저 | 지도 추상화 레이어로 전환 용이하게 설계 |
| AI API 비용 급증 | 중 | 캐싱, 요청 제한, 비용 모니터링 |
| 상권정보 API 응답 지연 | 중 | 캐싱 + 비동기 처리 |

### 일정 리스크

| 리스크 | 영향 | 대응 방안 |
|--------|------|-----------|
| 지도 연동 예상 초과 | 중 | 2주 버퍼 포함 (기존 14주 → 16주) |
| 카카오 개발자 등록 지연 | 저 | 사전 등록 완료 필수 |

---

## 📁 프로젝트 디렉토리 구조 (1단계)

```
zarimax/
├── lib/
│   ├── main.dart
│   ├── app/
│   │   ├── routes.dart
│   │   └── theme.dart
│   ├── core/
│   │   ├── constants/
│   │   ├── utils/
│   │   └── services/
│   │       ├── api_service.dart
│   │       ├── auth_service.dart
│   │       └── map_service.dart          # 지도 추상화
│   ├── data/
│   │   ├── models/
│   │   ├── repositories/
│   │   └── providers/
│   ├── features/
│   │   ├── auth/
│   │   ├── property/
│   │   ├── item/
│   │   ├── mbti/
│   │   ├── ai_prediction/
│   │   ├── map/                          # 지도 기능 모듈
│   │   │   ├── presentation/
│   │   │   │   ├── pages/
│   │   │   │   │   ├── map_search_page.dart
│   │   │   │   │   └── property_map_page.dart
│   │   │   │   └── widgets/
│   │   │   │       ├── property_marker.dart
│   │   │   │       └── cluster_widget.dart
│   │   │   ├── domain/
│   │   │   │   └── map_repository.dart
│   │   │   └── data/
│   │   │       ├── kakao_map_service.dart
│   │   │       └── map_service_impl.dart
│   │   ├── search/
│   │   └── dashboard/
│   └── shared/
│       └── widgets/
├── backend/
│   ├── app/
│   │   ├── main.py
│   │   ├── routers/
│   │   ├── models/
│   │   ├── services/
│   │   └── utils/
│   └── requirements.txt
└── pubspec.yaml
```

---

## ✅ 다음 단계 체크리스트

### 즉시 실행 (1주차)
- [ ] 카카오 개발자 등록 및 앱 키 발급
- [ ] Flutter 프로젝트 초기화
- [ ] flutter_kakao_maps 패키지 테스트 설치
- [ ] 카카오맵 기본 표시 PoC (Proof of Concept)

### 1단계 시작 전 준비
- [ ] PostgreSQL 스키마 확정
- [ ] API 엔드포인트 설계 (OpenAPI spec)
- [ ] UI/UX 와이어프레임 (Figma)
- [ ] 소상공인진흥공단 API 키 발급

---

*문서 작성일: 2026-02-06*
*최종 수정: v2.1 - 1단계 MVP에 카카오맵 지도 기능 추가*
